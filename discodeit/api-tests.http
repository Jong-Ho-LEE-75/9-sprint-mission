### Discodeit API 테스트 모음
### IntelliJ에서 각 요청 옆의 '▶' 버튼을 클릭하거나 Ctrl+Enter (Mac: Cmd+Enter)로 실행

### ==========================================
### 1. 사용자 관리 API
### ==========================================

### 1-1. 모든 사용자 조회
GET http://localhost:8080/users
Accept: application/json

### 1-2. 특정 사용자 조회 (ID는 실제 값으로 변경)
GET http://localhost:8080/users/7559dc90-d2de-4de2-a2b3-48a621c61f41
Accept: application/json

### 1-3. 사용자 생성 (JSON - 프로필 없이)
POST http://localhost:8080/users
Content-Type: application/json

{
  "username": "테스트유저1",
  "email": "test1@example.com",
  "password": "password123"
}

### 1-4. 사용자 생성 (Multipart - 프로필 포함)
POST http://localhost:8080/users/with-profile
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="username"

테스트유저2
--WebAppBoundary
Content-Disposition: form-data; name="email"

test2@example.com
--WebAppBoundary
Content-Disposition: form-data; name="password"

password123
--WebAppBoundary
Content-Disposition: form-data; name="profileImage"; filename="test.jpg"
Content-Type: image/jpeg

< ./src/main/resources/data/profiles/hansj.jpg
--WebAppBoundary--

### 1-5. 사용자 정보 수정 (JSON - 프로필 없이)
PUT http://localhost:8080/users/7559dc90-d2de-4de2-a2b3-48a621c61f41
Content-Type: application/json

{
  "username": "한성재_수정",
  "email": "hansj_updated@codeit.com",
  "password": "newpassword123"
}

### 1-6. 사용자 정보 수정 (Multipart - 프로필 포함)
PUT http://localhost:8080/users/7559dc90-d2de-4de2-a2b3-48a621c61f41/with-profile
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="username"

한성재_최종
--WebAppBoundary
Content-Disposition: form-data; name="email"

hansj@codeit.com
--WebAppBoundary
Content-Disposition: form-data; name="password"

password123
--WebAppBoundary
Content-Disposition: form-data; name="profileImage"; filename="hansj.jpg"
Content-Type: image/jpeg

< ./src/main/resources/data/profiles/hansj.jpg
--WebAppBoundary--

### 1-7. 사용자 삭제 (테스트 유저 ID로 변경 필요)
# DELETE http://localhost:8080/users/테스트유저ID

### ==========================================
### 2. 사용자 상태 관리 API
### ==========================================

### 2-1. 온라인 상태 업데이트
PUT http://localhost:8080/users/7559dc90-d2de-4de2-a2b3-48a621c61f41/status
Content-Type: application/json

{
  "lastAccessAt": "{{$timestamp}}"
}

### ==========================================
### 3. 바이너리 콘텐츠 조회 API
### ==========================================

### 3-1. 파일 1개 조회 (프로필 ID로 변경)
GET http://localhost:8080/binary-contents/9f0ed3d9-5f59-4b3f-95c8-06dc2f9ab8b3
Accept: application/json

### 3-2. 파일 여러개 조회 (한성재, 장현민 프로필)
GET http://localhost:8080/binary-contents?ids=9f0ed3d9-5f59-4b3f-95c8-06dc2f9ab8b3,571694c6-e839-4fa0-81ee-a4c3a04290b4
Accept: application/json

### 3-3. 파일 여러개 조회 (모든 사용자 프로필)
GET http://localhost:8080/binary-contents?ids=9f0ed3d9-5f59-4b3f-95c8-06dc2f9ab8b3,571694c6-e839-4fa0-81ee-a4c3a04290b4,5b6243b9-0ab5-4fc2-84e7-8497f030f2a0,a0a39374-e9d3-4c59-8840-2f2078f2641a
Accept: application/json

### ==========================================
### 4. 전체 시나리오 테스트
### ==========================================

### 시나리오 1: 새 사용자 등록 후 조회
POST http://localhost:8080/users
Content-Type: application/json

{
  "username": "시나리오테스트",
  "email": "scenario@test.com",
  "password": "test1234"
}

> {%
    client.global.set("newUserId", response.body.id);
    client.log("Created user ID: " + response.body.id);
%}

### 시나리오 2: 방금 생성한 사용자 조회
GET http://localhost:8080/users/{{newUserId}}
Accept: application/json

### 시나리오 3: 방금 생성한 사용자 삭제
DELETE http://localhost:8080/users/{{newUserId}}

### ==========================================
### 5. 성능 테스트 (여러 사용자 생성)
### ==========================================

### 성능 테스트 1: 사용자 1
POST http://localhost:8080/users
Content-Type: application/json

{
  "username": "성능테스트1",
  "email": "perf1@test.com",
  "password": "test1234"
}

### 성능 테스트 2: 사용자 2
POST http://localhost:8080/users
Content-Type: application/json

{
  "username": "성능테스트2",
  "email": "perf2@test.com",
  "password": "test1234"
}

### 성능 테스트 3: 사용자 3
POST http://localhost:8080/users
Content-Type: application/json

{
  "username": "성능테스트3",
  "email": "perf3@test.com",
  "password": "test1234"
}

### ==========================================
### 6. 에러 케이스 테스트
### ==========================================

### 6-1. 중복 이메일로 사용자 생성 (실패해야 함)
POST http://localhost:8080/users
Content-Type: application/json

{
  "username": "중복테스트",
  "email": "hansj@codeit.com",
  "password": "test1234"
}

### 6-2. 존재하지 않는 사용자 조회 (404 응답)
GET http://localhost:8080/users/00000000-0000-0000-0000-000000000000
Accept: application/json

### 6-3. 존재하지 않는 바이너리 콘텐츠 조회 (404 응답)
GET http://localhost:8080/binary-contents/00000000-0000-0000-0000-000000000000
Accept: application/json

### ==========================================
### 참고: 환경 변수 사용
### ==========================================
# IntelliJ HTTP Client는 다음과 같은 변수를 지원합니다:
# - {{$timestamp}}: 현재 타임스탬프 (ISO 8601)
# - {{$randomInt}}: 랜덤 정수
# - {{$uuid}}: 랜덤 UUID
# - 커스텀 변수: client.global.set() 사용
